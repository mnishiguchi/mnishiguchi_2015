<!--
  MovieSearch
  - View template for the movieSearch directive.
-->

<!--
  Search bar
  - Accept a search key.
  - Trigger searching by the blur event, rather than by button click.
  - The search button is merely a decorator.
-->
<form class="form-inline">
  <div class="form-group">
    <div class="input-group">

      <input type="text"
        ng-model="movieSearch.searchKey"
        ng-model-options="{
          updateOn: 'default blur',
          debounce: {
            default: 700,
            blur: 0
          }
        }"
        ng-change="movieSearch.getData()"
        class="form-control"
        placeholder="Enter movie name">

      <div class="input-group-addon">
        <a href=""><i class="fa fa-search"></i></a>
      </div>

    </div>
  </div>
</form>

<!-- Loading indicator -->
<p
  ng-if="movieSearch.loading">
  <i class="fa fa-spinner fa-spin"></i>
  Loading...
</p>

<!--
  Movie
  - Pass into the info attribute a movieSearch.movieInfo object to be displayed.
-->
<movie info="movieSearch.movieInfo"></movie>

<!--
  Clear button
  - Displayed when search key exists.
  - Call movieSearch.clearData() when clicked.
-->
<a
  ng-show="movieSearch.searchKey !== ''"
  ng-click="movieSearch.clearData() ; scrollTo( movieSearch.topId );"
  anchor-hash-link>

  <span class="fa-stack fa-lg">
    <i class="fa fa-square-o fa-stack-2x"></i>
    <i class="fa fa-times fa-stack-1x"></i>
  </span>
</a>
